<!DOCTYPE html>
<html lang="zxx" class="no-js">
{% load static %}

<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<link rel="shortcut icon" href="{% static 'user/img/fav.png' %} ">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<meta name="csrf-token" content="{{ csrf_token }}">

	<!-- Site Title -->
	<title>Karma Shop</title>
	<!--
		CSS
		============================================= -->
	<link rel="stylesheet" href="{% static 'user/css/linearicons.css'%} ">
	<link rel="stylesheet" href="{% static 'user/css/font-awesome.min.css'%} ">
	<link rel="stylesheet" href="{% static 'user/css/themify-icons.css'%} ">
	<link rel="stylesheet" href="{% static 'user/css/bootstrap.css'%}">
	<link rel="stylesheet" href="{% static 'user/css/owl.carousel.css' %}">
	<link rel="stylesheet" href="{% static 'user/css/nice-select.css' %} ">
	<link rel="stylesheet" href="{% static 'user/css/nouislider.min.css' %}">
	<link rel="stylesheet" href="{% static 'user/css/ion.rangeSlider.css' %}" />
	<link rel="stylesheet" href="{% static 'user/css/ion.rangeSlider.skinFlat.css' %}" />
	<link rel="stylesheet" href="{% static 'user/css/magnific-popup.css' %}">
	<link rel="stylesheet" href="{% static 'user/css/main.css' %}">
	<style>
    .product {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .product img {
      width: 100px;
      height: 100px;
      margin-right: 10px;
    }

    .product-info {
      font-size: 18px;
    }
	
	.list {
        list-style-type: none;
        padding: 0;
    }

    .list li {
        display: flex;
        align-items: center;
    }

    .item-name {
        flex: 1;
        padding-left: 25px;
    }

    .item-quantity,
    .item-total {
        width: 100px;
        text-align: center;
    }.item-names {
        flex: 1;
        padding-left: 25px;
    }

    .item-quantitys,
    .item-totals {
        width: 100px;
        text-align: center;
    }
	.list_2 {
        text-align: right;
    }
</style>

</head>
<!--   end of head  -->


{% block content %}
    
{% endblock content %}
    


	<!-- start footer Area -->
	
	<footer class="footer-area section_gap">
		<div class="container">
			<div class="row">
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>About Us</h6>
						<p>
							Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore dolore
							magna aliqua.
						</p>
					</div>
				</div>
				<div class="col-lg-4  col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Newsletter</h6>
						<p>Stay update with our latest</p>
						<div class="" id="mc_embed_signup">


								<div class="d-flex flex-row">

									<input class="form-control" name="EMAIL" placeholder="Enter Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter Email '"
									 required="" type="email">


									<button class="click-btn btn btn-default"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></button>
									<div style="position: absolute; left: -5000px;">
										<input name="b_36c4fd991d266f23781ded980_aefe40901a" tabindex="-1" value="" type="text">
									</div>

									<!-- <div class="col-lg-4 col-md-4">
												<button class="bb-btn btn"><span class="lnr lnr-arrow-right"></span></button>
											</div>  -->
								</div>
								<div class="info"></div>
						</div>
					</div>
				</div>
				<div class="col-lg-3  col-md-6 col-sm-6">
					<div class="single-footer-widget mail-chimp">
						<h6 class="mb-20">Instragram Feed</h6>
						<ul class="instafeed d-flex flex-wrap">
							<li><img src="{% static 'user/img/i1.jpg' %} " alt=""></li>
							<li><img src="{% static 'user/img/i2.jpg' %}" alt=""></li>
							<li><img src="{% static 'user/img/i3.jpg' %}" alt=""></li>
							<li><img src="{% static 'user/img/i4.jpg' %}" alt=""></li>
							<li><img src="{% static 'user/img/i5.jpg' %}" alt=""></li>
							<li><img src="{% static 'user/img/i6.jpg' %}" alt=""></li>
							<li><img src="{% static 'user/img/i7.jpg' %}" alt=""></li>
							<li><img src="{% static 'user/img/i8.jpg' %}" alt=""></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-2 col-md-6 col-sm-6">
					<div class="single-footer-widget">
						<h6>Follow Us</h6>
						<p>Let us be social</p>
						<div class="footer-social d-flex align-items-center">
							<a href="#"><i class="fa fa-facebook"></i></a>
							<a href="#"><i class="fa fa-twitter"></i></a>
							<a href="#"><i class="fa fa-dribbble"></i></a>
							<a href="#"><i class="fa fa-behance"></i></a>
						</div>
					</div>
				</div>
			</div>
			<div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
				<p class="footer-text m-0"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
</p>
			</div>
		</div>
	</footer>
	<!-- End footer Area --> 

	<script src="{% static 'user/js/vendor/jquery-2.2.4.min.js' %}"></script>
    <script src="{% static 'user/js/main.js' %}"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
	 crossorigin="anonymous"></script>
	<script src="{% static 'user/js/vendor/bootstrap.min.js' %}"></script>
	<script src="{% static 'user/js/jquery.ajaxchimp.min.js' %}"></script>
	<script src="{% static 'user/js/jquery.nice-select.min.js' %}"></script>
	<script src="{% static 'user/js/jquery.sticky.js' %}"></script>
	<script src="{% static 'user/js/nouislider.min.js' %}"></script>
	<script src="{% static 'user/js/countdown.js' %}"></script>
	<script src="{% static 'user/js/jquery.magnific-popup.min.js' %}"></script>
	<script src="{% static 'user/js/owl.carousel.min.js' %}"></script>
	<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script -->

	<!-- gmaps Js  -->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
	<script src="{% static 'user/js/gmaps.min.js' %}"></script>
	
<script>
	function checkout() {
	  const items = document.querySelectorAll(".item-name");
	  const quantities = document.querySelectorAll('.item-quantity');
	  const totals = document.querySelectorAll('.item-total');
	  const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');

	  const cartData = [];
  
	  for (let i = 0; i < items.length; i++) {
		const itemQuantity = quantities[i].textContent;
		const itemTotal = totals[i].textContent;
		const itemName = items[i].textContent;
		
		const item = {
		  item_name: itemName,
		  quantity: itemQuantity,
		  amount: itemTotal
		};
  
		cartData.push(item);
		// console.log(item)
	}
	if (cartData.length === 0) {
 		console.log("The list is empty.");
		window.location.href = "/"
	}
	else {
	cart = JSON.stringify(cartData)
	console.log("CART"+cart)
	a="'" +cart+"'"
	console.log("bbb"+a)
	js  = JSON.parse(cart)
	console.log(js)
	$.ajax({
		url: '/confirm-order/',
		type: 'POST',
		contentType: 'application/json',
		headers: {
			'X-CSRFToken': csrfToken
		},
		data:JSON.stringify(js),
		success: function(response) {
        console.log("SUCCESSFUL SENDING");

        // Redirect to another page
        window.location.href = '/confirmation/';
      },
      error: function(error) {
        console.log("ERROR WHILE SENDING DATA");
      }
    });
  }
}
</script>

  </script>
	
	
	<script>
		$(document).ready(function() {
						$('.category-link').on('click', function(event) {
							event.preventDefault();
							var categoryId = $(this).data('category-id');
							console.log(5 +4 ,categoryId)
							var url = 'load-categories/' + categoryId + '/';
							$.ajax({
								url: url,
								success: function(data) {
            // Generate the HTML markup for each product and append it to the product list on the page
            var products = data.products;
			var productDiv = document.querySelector(".productfrombackend");
			// Set its innerHTML to an empty string
			productDiv.innerHTML = "";

            var html = '';
            for (var i = 0; i < products.length; i++) {
                var product = products[i];
                html += '<div class="single-product">' +
                        '<img class="img-fluid" src="{{MEDIA_URL}}'+ product.image + '"' + '>' +
                        '<div class="product-details">' +
                        '<h6>' + product.name + '</h6>' +
                        '<div class="price">' +
                        '<h6>' + product.price + '</h6>' +
                        '<h6 class="l-through">' + product.price + '</h6>' +
                        '</div>' +
                        '<div class="prd-bottom">' +
                        '<a href="/add-to-cart/'+product.id +'" class="social-info">' +
                        '<span class="ti-bag"></span>' +
                        '<p class="hover-text">add to bag</p>' +
                        '</a>' +
                        '<a href="" class="social-info">' +
                        '<span class="lnr lnr-heart"></span>' +
                        '<p class="hover-text">Wishlist</p>' +
                        '</a>' +
                        '<a href="" class="social-info">' +
                        '<span class="lnr lnr-move"></span>' +
                        '<p class="hover-text">view more</p>' +
                        '</a>' +
                        '</div>' +
                        '</div>' +
                        '</div>';
            }
            $('.productfrombackend').append(html);
        },
						})
							
						});
					});
	</script>	

</body>

</html>